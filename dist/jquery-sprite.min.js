/*!
 * jQuery-Sprite - 16th Out 2015
 * https://github.com/miamarti/jquery-sprite-animation
 *
 * Licensed under the MIT license.
 * http://opensource.org/licenses/MIT
 */
(function(h,r){function k(a,k){function D(a){e.reversed=a;u||(c.isPaused=!1,A("play"),u=x(F))}function F(){u=x(F);var E=v();60>d.fps&&e.lastFrame&&e.lastFrame+1E3/d.fps+1>E||(e.lastFrame=E,y?(l.x+=d.speedX/d.fps,l.y+=d.speedY/d.fps,d.bgWidth&&Math.abs(l.x)>d.bgWidth&&(l.x%=d.bgWidth),d.bgHeight&&Math.abs(l.y)>d.bgHeight&&(l.y%=d.bgHeight)):(e.finite?m=e.immediate?e.to:m+(m>e.to?-1:1):e.reversed?0>=--m&&(m=q.length-1):++m>=q.length&&(m=0),c.frame=m),B=y?Math.round(l.x)+"px "+Math.round(l.y)+"px":q[m],
B!==G&&(a.style.backgroundPosition=G=B),A("frame"),e.finite&&e.to===m&&(c.pause(),"function"===b(e.callback)&&e.callback.call(c)))}function H(a,b){t=0;for(z=n[a].length;t<z;t++)if(n[a][t]===b)return t;return-1}function A(a,b){if(n[a])for(t=0,z=n[a].length;t<z;t++)n[a][t].call(c,a,b)}function C(b){return h.getComputedStyle?h.getComputedStyle(a,null)[b]:a.currentStyle[b]}var d=g(k),c=this,y=!d.frames,q=[],n={},e={},m=0,l,B,G,u,t,z;c.element=a;c.width=d.width||a.clientWidth;c.height=d.height||a.clientHeight;
c.options=d;c.isPaused=!0;c.pause=function(){w(u);u=0;e.lastFrame=0;c.isPaused||(c.isPaused=!0,A("pause"));return c};c.play=function(a){e.finite=!1;e.callback=r;e.immediate=!1;D(a);return c};c.toggle=function(){c[u?"pause":"play"]();return c};c.toStart=function(a,b){return c.to(0,a,b)};c.toEnd=function(a,b){return c.to(q.length-1,a,b)};c.to=function(a,d,f){var p;(p=y)||(p=!(!isNaN(parseFloat(a))&&isFinite(a)));if(p||0>a||a>=q.length)return c;"function"===b(d)&&(f=d,d=!1);if(a===m)if(0===a)m=q.length;
else if(a===q.length-1)m=-1;else return"function"===b(f)&&f.call(c),c.pause(),c;e.finite=!0;e.to=a;e.immediate=!!d;e.callback=f;D();return c};c.set=function(a,b){d[a]=b;return c};c.on=function(a,d){if("object"===b(a))for(var f in a){if(a.hasOwnProperty(f))c.on(f,a[f])}else if("function"===b(d)){f=a.split(" ");for(var p=0,e=f.length;p<e;p++)n[f[p]]=n[f[p]]||[],-1===H(f[p],d)&&n[f[p]].push(d)}else if("array"===b(d))for(f=0,p=d.length;f<p;f++)c.on(a,d[f]);return c};c.off=function(a,d){if(d instanceof
Array)for(var f=0,e=d.length;f<e;f++)c.off(a,d[f]);else for(var f=a.split(" "),e=0,l=f.length;e<l;e++)if(n[f[e]]=n[f[e]]||[],"undefined"===b(d))n[f[e]].length=0;else{var h=H(f[e],d);-1!==h&&n[f[e]].splice(h,1)}return c};c.destroy=function(){c.pause();a.style.backgroundPosition="";return c};(function(){var a=(C("backgroundPosition")||C("backgroundPositionX")+" "+C("backgroundPositionY")).replace(/left|top/gi,0).split(" ");l={x:0|parseInt(a[0],10),y:0|parseInt(a[1],10)};if(y)c.pos=l;else{for(a=q.length=
0;a<d.frames;a++)d.vertical?l.y=a*-c.height:l.x=a*-c.width,q.push(l.x+"px "+l.y+"px");c.frames=q.length;c.frame=0}})()}function b(a){return null==a?String(a):"object"===typeof a||"function"===typeof a?a instanceof h.NodeList&&"nodelist"||a instanceof h.HTMLCollection&&"htmlcollection"||Object.prototype.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase():typeof a}function g(a){var h={};a="object"===b(a)?a:{};for(var g in k.defaults)h[g]=(a.hasOwnProperty(g)?a:k.defaults)[g];return h}var w=h.cancelAnimationFrame||
h.cancelRequestAnimationFrame,x=h.requestAnimationFrame;(function(){for(var a=["moz","webkit","o"],b=0,g=0,k=a.length;g<k&&!w;++g)x=(w=h[a[g]+"CancelAnimationFrame"]||h[a[g]+"CancelRequestAnimationFrame"])&&h[a[g]+"RequestAnimationFrame"];w||(x=function(a){var g=+new Date,k=Math.max(0,16-(g-b));b=g+k;return h.setTimeout(function(){a(g+k)},k)},w=function(a){clearTimeout(a)})})();var v=function(){var a=h.performance;return a&&a.now?a.now.bind(a):function(){return+new Date}}();h.Motio=k;k.defaults={fps:15,
frames:0,vertical:0,width:0,height:0,speedX:0,speedY:0,bgWidth:0,bgHeight:0}})(window);
(function(h){h.fn.sprite=function(r){r=h.extend({},{slide:1},r);this[0].dataset.hasOwnProperty("slide")||(this[0].dataset.slide=1);this[0].dataset.hasOwnProperty("cycle")||(this[0].dataset.cycle=0);var k=this,b={elmt:k[0],config:void 0,sprite:void 0,isEnd:!1,main:function(g){b.setConfig(g);b.createElements();b.createObject()},setConfig:function(g){b.config=g},createElements:function(){b.createTemps();b.createStyles()},createTemps:function(){var g=document.createElement("div");g.setAttribute("class",
"slide-tmp");g.dataset.slide=b.config.slide;for(var h in b.config.cycles)g.appendChild(document.createElement("div"));document.body.appendChild(g)},createStyles:function(){var g=0,h="",k=document.createElement("style");k.dataset.ref="jquerySprite";var v='[data-slide="'+b.config.slide+'"]',a;a=""+(v+".slide-tmp{")+"    width: 0px;";a+="    height: 0px;";a+="    position: fixed;";a+="    left: 0px;";a+="    top: 0px;";a+="    opacity: 0;";a+="    -ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity = 0);";
a+="    filter: alpha(opacity = 0);";a+="}";for(var r in b.config.cycles)a+=v+".slide-tmp div:nth-of-type("+(g+1)+"){",a+='    background: url("'+b.config.cycles[r].url+'") 0 0 no-repeat;',a+="}",a+=v+'[data-cycle="'+g+'"]{',a+='    background: url("'+b.config.cycles[r].url+'") 0 0 no-repeat;',a+="}",h=b.config.cycles[r].url,g++;a+=v+"{";a+='    background: url("'+h+'") 0 0 no-repeat;';a+="    background-position: 0 0;";a+="}";k.innerHTML=a;document.body.appendChild(k)},createObject:function(){b.reset();
b.sprite&&b.sprite.destroy&&b.sprite.destroy();b.sprite=new Motio(b.elmt,b.config);b.sprite.on("frame",function(){0===this.frame&&(b.elmt.dataset.cycle=parseInt(b.elmt.dataset.cycle)+1,"3"===b.elmt.dataset.cycle&&(this.to(1,!0),b.isEnd=!0));if(b.config.hasOwnProperty("onFrame"))b.config.onFrame(this)});if(b.config.hasOwnProperty("onPlay"))b.config.onPlay(this);if(b.config.hasOwnProperty("onPause"))b.config.onPause(this)},reset:function(){b.isEnd&&(b.elmt.dataset.cycle="0",b.isEnd=!1)},toggle:function(){b.reset();
b.sprite.toggle()},play:function(){b.reset();b.sprite.play()},pause:function(){b.reset();b.sprite.pause()},destroy:function(){document.querySelector('[data-ref="jquerySprite"]').remove();b.elmt.dataset.cycle=0;b.reset();b.sprite.destroy();delete k.__proto__.play;delete k.__proto__.pause;delete k.__proto__.toggle;delete k.__proto__.destroy}};this.hasOwnProperty("play")||(b.main(r),this.__proto__.play=b.play.bind(b),this.__proto__.pause=b.pause.bind(b),this.__proto__.toggle=b.toggle.bind(b),this.__proto__.destroy=
b.destroy.bind(b));return k}})(jQuery);
