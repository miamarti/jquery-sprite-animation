/*!
 * jQuery-Sprite - 16th Out 2015
 * https://github.com/miamarti/jquery-sprite-animation
 *
 * Licensed under the MIT license.
 * http://opensource.org/licenses/MIT
 */
(function(h,v){function k(d,k){function D(a){e.reversed=a;u||(c.isPaused=!1,A("play"),u=x(F))}function F(){u=x(F);var E=b();60>l.fps&&e.lastFrame&&e.lastFrame+1E3/l.fps+1>E||(e.lastFrame=E,y?(m.x+=l.speedX/l.fps,m.y+=l.speedY/l.fps,l.bgWidth&&Math.abs(m.x)>l.bgWidth&&(m.x%=l.bgWidth),l.bgHeight&&Math.abs(m.y)>l.bgHeight&&(m.y%=l.bgHeight)):(e.finite?n=e.immediate?e.to:n+(n>e.to?-1:1):e.reversed?0>=--n&&(n=r.length-1):++n>=r.length&&(n=0),c.frame=n),B=y?Math.round(m.x)+"px "+Math.round(m.y)+"px":r[n],
B!==G&&(d.style.backgroundPosition=G=B),A("frame"),e.finite&&e.to===n&&(c.pause(),"function"===a(e.callback)&&e.callback.call(c)))}function H(a,c){t=0;for(z=p[a].length;t<z;t++)if(p[a][t]===c)return t;return-1}function A(a,b){if(p[a])for(t=0,z=p[a].length;t<z;t++)p[a][t].call(c,a,b)}function C(a){return h.getComputedStyle?h.getComputedStyle(d,null)[a]:d.currentStyle[a]}var l=g(k),c=this,y=!l.frames,r=[],p={},e={},n=0,m,B,G,u,t,z;c.element=d;c.width=l.width||d.clientWidth;c.height=l.height||d.clientHeight;
c.options=l;c.isPaused=!0;c.pause=function(){w(u);u=0;e.lastFrame=0;c.isPaused||(c.isPaused=!0,A("pause"));return c};c.play=function(a){e.finite=!1;e.callback=v;e.immediate=!1;D(a);return c};c.toggle=function(){c[u?"pause":"play"]();return c};c.toStart=function(a,b){return c.to(0,a,b)};c.toEnd=function(a,b){return c.to(r.length-1,a,b)};c.to=function(b,d,f){var q;(q=y)||(q=!(!isNaN(parseFloat(b))&&isFinite(b)));if(q||0>b||b>=r.length)return c;"function"===a(d)&&(f=d,d=!1);if(b===n)if(0===b)n=r.length;
else if(b===r.length-1)n=-1;else return"function"===a(f)&&f.call(c),c.pause(),c;e.finite=!0;e.to=b;e.immediate=!!d;e.callback=f;D();return c};c.set=function(a,b){l[a]=b;return c};c.on=function(b,d){if("object"===a(b))for(var f in b){if(b.hasOwnProperty(f))c.on(f,b[f])}else if("function"===a(d)){f=b.split(" ");for(var q=0,e=f.length;q<e;q++)p[f[q]]=p[f[q]]||[],-1===H(f[q],d)&&p[f[q]].push(d)}else if("array"===a(d))for(f=0,q=d.length;f<q;f++)c.on(b,d[f]);return c};c.off=function(b,d){if(d instanceof
Array)for(var f=0,e=d.length;f<e;f++)c.off(b,d[f]);else for(var f=b.split(" "),e=0,l=f.length;e<l;e++)if(p[f[e]]=p[f[e]]||[],"undefined"===a(d))p[f[e]].length=0;else{var m=H(f[e],d);-1!==m&&p[f[e]].splice(m,1)}return c};c.destroy=function(){c.pause();d.style.backgroundPosition="";return c};(function(){var a=(C("backgroundPosition")||C("backgroundPositionX")+" "+C("backgroundPositionY")).replace(/left|top/gi,0).split(" ");m={x:0|parseInt(a[0],10),y:0|parseInt(a[1],10)};if(y)c.pos=m;else{for(a=r.length=
0;a<l.frames;a++)l.vertical?m.y=a*-c.height:m.x=a*-c.width,r.push(m.x+"px "+m.y+"px");c.frames=r.length;c.frame=0}})()}function a(a){return null==a?String(a):"object"===typeof a||"function"===typeof a?a instanceof h.NodeList&&"nodelist"||a instanceof h.HTMLCollection&&"htmlcollection"||Object.prototype.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase():typeof a}function g(b){var h={};b="object"===a(b)?b:{};for(var g in k.defaults)h[g]=(b.hasOwnProperty(g)?b:k.defaults)[g];return h}var w=h.cancelAnimationFrame||
h.cancelRequestAnimationFrame,x=h.requestAnimationFrame;(function(){for(var a=["moz","webkit","o"],b=0,g=0,k=a.length;g<k&&!w;++g)x=(w=h[a[g]+"CancelAnimationFrame"]||h[a[g]+"CancelRequestAnimationFrame"])&&h[a[g]+"RequestAnimationFrame"];w||(x=function(a){var d=+new Date,g=Math.max(0,16-(d-b));b=d+g;return h.setTimeout(function(){a(d+g)},g)},w=function(a){clearTimeout(a)})})();var b=function(){var a=h.performance;return a&&a.now?a.now.bind(a):function(){return+new Date}}();h.Motio=k;k.defaults={fps:15,
frames:0,vertical:0,width:0,height:0,speedX:0,speedY:0,bgWidth:0,bgHeight:0}})(window);
(function(h){h.fn.sprite=function(v){v=h.extend({},{slide:1},v);this[0].dataset.hasOwnProperty("slide")||(this[0].dataset.slide=1);this[0].dataset.hasOwnProperty("cycle")||(this[0].dataset.cycle=0);var k=this,a={elmt:k[0],config:void 0,sprite:void 0,isEnd:!1,cycle:0,main:function(g){a.setConfig(g);a.createElements();a.createObject()},setConfig:function(g){a.config=g},createElements:function(){a.createTemps();a.createStyles()},createTemps:function(){var g=document.createElement("div");g.setAttribute("class",
"slide-tmp");g.dataset.slide=a.config.slide;for(var h in a.config.cycles)g.appendChild(document.createElement("div"));document.body.appendChild(g)},createStyles:function(){var g="",h=document.createElement("style");h.dataset.ref="jquerySprite";var k='[data-slide="'+a.config.slide+'"]',b;b=""+(k+".slide-tmp{")+"    width: 0px;";b+="    height: 0px;";b+="    position: fixed;";b+="    left: 0px;";b+="    top: 0px;";b+="    opacity: 0;";b+="    -ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity = 0);";
b+="    filter: alpha(opacity = 0);";b+="}";for(var d in a.config.cycles)b+=k+".slide-tmp div:nth-of-type("+(a.cycle+1)+"){",b+='    background: url("'+a.config.cycles[d].url+'") 0 0 no-repeat;',b+="}",b+=k+'[data-cycle="'+a.cycle+'"]{',b+='    background: url("'+a.config.cycles[d].url+'") 0 0 no-repeat;',b+="}",g=a.config.cycles[d].url,a.cycle++;b+=k+"{";b+='    background: url("'+g+'") no-repeat;';b+="    background-position: 0 0;";b+="}";b+=".is-end-cicle {";b+="    background-position: right 0 !important;";
b+="}";h.innerHTML=b;document.body.appendChild(h)},createObject:function(){a.reset();a.sprite&&a.sprite.destroy&&a.sprite.destroy();a.sprite=new Motio(a.elmt,a.config);a.sprite.on("frame",function(){0===this.frame&&(a.elmt.dataset.cycle=parseInt(a.elmt.dataset.cycle)+1,a.elmt.dataset.cycle===a.cycle.toString()&&(this.to(1,!0),a.isEnd=!0,k.addClass("is-end-cicle")));if(a.config.hasOwnProperty("onFrame"))a.config.onFrame(this)});if(a.config.hasOwnProperty("onPlay"))a.config.onPlay(this);if(a.config.hasOwnProperty("onPause"))a.config.onPause(this)},
reset:function(){a.isEnd&&(k.removeClass("is-end-cicle"),a.elmt.dataset.cycle="0",a.isEnd=!1)},toggle:function(){a.reset();a.sprite.toggle()},play:function(){a.reset();a.sprite.play()},pause:function(){a.reset();a.sprite.pause()},destroy:function(){document.querySelector('[data-ref="jquerySprite"]').remove();a.elmt.dataset.cycle=0;a.reset();a.sprite.destroy();delete k.__proto__.play;delete k.__proto__.pause;delete k.__proto__.toggle;delete k.__proto__.destroy}};this.hasOwnProperty("play")||(a.main(v),
this.__proto__.play=a.play.bind(a),this.__proto__.pause=a.pause.bind(a),this.__proto__.toggle=a.toggle.bind(a),this.__proto__.destroy=a.destroy.bind(a));return k}})(jQuery);
